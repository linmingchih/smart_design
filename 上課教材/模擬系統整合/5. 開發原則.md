開發原則
---

### 開發原則概述
- 專案結構化，包含.git管理、資料夾結構與命名規範，有助於團隊協作與維護。.venv虛擬環境確保依賴一致性。uv可以用於管理Python版本與套件。

- 分離式開發，將EDB與AEDT的操作分開在不同腳本中執行，避免資源鎖定與衝突。使用subprocess模組呼叫子腳本，確保每個腳本在獨立的Python進程中運行。

- json配置管理，使用config.json集中管理專案參數與設定，方便修改與擴展。透過json模組讀取與寫入配置，提升靈活性。

- MVC架構設計，將GUI邏輯與模擬腳本分離，提升可維護性與擴展性。Model負責數據與邏輯，View負責界面顯示，Controller處理用戶交互。

- QT GUI設計，利用PySide6或PyQt5構建跨平台圖形界面，提升用戶體驗。設計直觀的操作面板與參數設置，方便用戶使用。

- Controller腳本管理，負責模擬軟體資訊讀取與執行，實現自動化模擬任務。Controller調用Model與View，協調整個應用流程。

- Core模組化，將核心功能(PyAEDT、PyEDB操作)封裝在獨立模組中，提升重用性與測試性。Core模組提供API供Controller調用。

### GUI 設計原則
- 流程導向，設計符合用戶工作流程的界面，減少操作步驟與學習成本。

- 參數設置，提供靈活的參數配置界面，支持多種輸入方式（文本框、下拉選單等）。

- 訊息視窗，提供即時反饋與日誌顯示，幫助用戶了解模擬進度與結果。

- 錯誤處理，設計友好的錯誤提示與處理機制，提升用戶體驗與系統穩定性。

### 流程設計原則
#### 建立專案並初始化.git與虛擬環境。
- uv init建立專案並初始化.git。
- uv sync建立虛擬環境。
- uv add 安裝PySide6、PyAEDT、PyEDB等依賴。
- 建立src資料夾，存放核心模組與腳本。
- 建立examples資料夾，存放範例腳本與測試用例。

#### 建立PyEDB/PyAEDT單一腳本範例，確保每個腳本專注於單一任務，便於測試與維護。透過sys.argv傳遞參數，提高靈活性。
- import_edb.py：負責EDB專案的建立與編輯。
- set_ports.py：負責在EDB中設置端口。
- run_hfss.py：負責使用HFSS3dLayout進行模擬設定與求解。
- make_report.py：負責生成模擬結果報告。
- 每個腳本接受命令列參數，取得project.json中的配置，執行對應任務。
- 須完整初始化與關閉EDB/AEDT，確保資源釋放。
- 先以main.py透過呼叫.py並設定project.json模擬資料流，確保流程順暢。
- main.py當中需明確定義每個步驟呼叫的腳本與參數。
- 之後便讓AI透過模擬main.py方式生成GUI.py - 關於GUI的輸入輸出也可以用docstring在main.py中定義清楚。


#### project.json配置模擬管理，
- 使用config.json集中管理專案參數與設定，方便修改與擴展。透過json模組讀取與寫入配置，提升靈活性。
- 每一次的模擬任務都會對應一個目錄，當中包含project.json文件，內容包括：
- 定義專案名稱、路徑、模擬參數等。
- 定義腳本參數與選項。
- 定義GUI配置與佈局。
- GUI tabs與scripts透過json進行參數傳遞與配置。

**project.json範例：**
```json
{
  "project_name": "Sample Project",
  "edb_path": "path/to/project.edb",
  "hfss_version": "2025.1",
  "simulation_parameters": {
    "frequency": "2.4GHz",
    "mesh_size": "0.1mm"
  },
  "scripts": {
    "import_edb": {
      "enabled": true,
      "params": {}
    },
    "set_ports": {
      "enabled": true,
      "params": {
        "port_list": ["DDR_DQ0", "GND"]
      }
    },
    "run_hfss": {
      "enabled": true,
      "params": {}
    },
    "make_report": {
      "enabled": true,
      "params": {
        "report_type": "summary"
      }
    }
  }
}
```


#### 編寫 gemini.md

- 描述整體架構與開發流程，作為開發者與AI Agent的參考文件。
- 定義主要程式碼目錄結構及各自職責（如 `/tabs`, `/scripts`, `/services`）。
- 簡述數據如何在系統中流動（例如：用戶點擊 -> Controller -> Model -> 後端腳本 -> Model 更新 -> View 刷新）。
- 定義AI協同開發模式，包括上下文注入、探索式提問與方案評估、澄清與修正的閉環。


#### 啟動Google Gemini AI Agent，協助GUI開發與問題解決。
- 連接腳本與GUI框架，確保低耦合與高內聚。
- 測試與驗證，確保每個模組與整體系統
- 生成代碼與文檔，提升開發效率與質量。


 